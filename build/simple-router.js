!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleRouter=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),l=n(2),s=n(4);t.SimpleRouter=function(){function e(t){o(this,e),this._config=t,this._parser=new DOMParser,this._links=[],this._outlets=[],this._routes=[],this._routerState=[],this._cssLoaded=!1,this._jsLoaded=!1,this._onCssLoaded=null,this._onJsLoaded=null,this._current=null,this._defaultRoute=new l.Route("/",{handler:function(){}},null),this._notFoundRoute=new l.Route(null,{handler:function(){}},""),this.findOutlets(),this.findLinks()}return u(e,[{key:"findOutlets",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"router-outlet",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;this.clearDeadOutlets(),n.querySelectorAll("["+t+"]").forEach(function(n,o,r){n.isRegistered||(n.isRegistered=!0,e._outlets.push(new s.Outlet(n,e.getAttributeValueByName(n,t))))},this)}},{key:"clearDeadOutlets",value:function(){this._outlets=this._outlets.filter(function(e,t,n){var o=document.body.contains(e.element);return!1===o&&(e.element.isRegistered=!1,e.element=null),o})}},{key:"findOutletByName",value:function(e){return this._outlets.find(function(t){return t.name==e},this)}},{key:"findLinks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"route-url",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;this.clearDeadLinks(),n.querySelectorAll("["+t+"]").forEach(function(t){t.isRegistered||e._links.push(new i.Link(t,e.findOutletByName(e.getAttributeValueByName(t,"route-target")),e.handleLinkClick.bind(e)))},this)}},{key:"clearDeadLinks",value:function(){this._links=this._links.filter(function(e){var t=document.body.contains(e.element);return!1===t&&(e.element.isRegistered=!1,e.element.onclick=null,e.element=null),t})}},{key:"findRoute",value:function(e){var t=e.url==this._defaultRoute.link?this._defaultRoute:null,n=e.url.split("/"),o=null;return t=this._routes.find(function(e){var t=e.routeUrl.split("/"),r=!0;if(t.length===n.length){o={};for(var u=0;u<t.length;u++)if(n[u]===t[u])console.log("these parts match!");else{if(!0!==t[u].startsWith(":")){console.log("no route matches!"),r=!1;break}o[t[u].substring(1)]=n[u]}}else r=!1;return r},this),t||(t=this._notFoundRoute,o={linkProvided:e.url}),{route:t,params:o}}},{key:"handleLinkClick",value:function(e){var t=e.target,n=this._links.find(function(e){return t===e.element}),o=this.findRoute(n),r={link:n,route:o.route,params:o.params};console.log(r),this.handleRoute(r)}},{key:"fetchContent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=new XMLHttpRequest;i.open(n,e,!0,r,u),o&&o.forEach(function(e){i.setRequestHeader(e.name,e.value)},this),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&onFetchResponse()},i.send()}},{key:"onFetchResponse",value:function(){}},{key:"handleRoute",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.route.postRouteProcessing&&e.route.postRouteProcessing(e),this._current&&this._routerState.push(this._currnet),this._current=e,!0===shouldFetch(e)&&(e.route.preFetchContent&&e.route.preFetchContent(e),e.route.postFetchContent&&e.route.postFetchContent(e)),shouldLoad(e)&&(e.route.preContentLoad&&e.route.preContentLoad(e),e.route.postContentLoad&&e.route.postContentLoad(e)),e.route.handler&&e.route.handler(e),e.route.postLinkHandler&&e.route.postLinkHandler(e)}},{key:"shouldFetch",value:function(e){var t=!1,n=e.route.content;return n.html&&n.html.url&&(t=!0),n.css&&n.css.url&&(t=!0),n.js&&n.js.url&&(t=!0),t}},{key:"shouldLoad",value:function(e){return!1}},{key:"handleLifeCycleFailure",value:function(e){console.error("A failure occurred in lifecycle chain!",void 0===e?"undefined":r(e),e)}},{key:"registerRoute",value:function(){"function"==typeof(arguments.length<=0?void 0:arguments[0])?this._defaultRoute.events=new l.Route("/",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):"string"==typeof(arguments.length<=0?void 0:arguments[0])&&this._routes.push(new l.Route(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]))}},{key:"unregisterRoute",value:function(e){this._defaultRoute.url==routeLink&&(this._defaultRoute.events=null)}},{key:"getAttributeValueByName",value:function(e,t){return e.attributes.getNamedItem(t).value}}]),e}()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.Link=function e(t,n,r){o(this,e),this.element=t,this.url=this.element.attributes.getNamedItem("route-url").value,this.outlet=n,this.element.onclick=r,this.element.isRegistered=!0}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Route=void 0;var r=n(3);t.Route=function e(t,n){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;o(this,e),this.routeUrl=t,this.postRouteProcessing=n.postRouteProcessing,this.preFetchContent=n.preFetchContent,this.postFetchContent=n.postFetchContent,this.handler=n.handler,this.preContentLoad=n.preContentLoad,this.postContentLoad=n.postContentLoad,this.postRouteHandling=n.postRouteHandling;var s=null;u&&(s={},!0===(0,r.isHTMLString)(u)?(s.template=u,s.gathered=!0):(s.url=u,s.gathered=!1)),this.content={html:s,css:i?{url:i,gathered:!1}:null,js:l?{url:l,gathered:!1}:null}}},function(e,t,n){"use strict";function o(e){var t=(new DOMParser).parseFromString(e,r);return Array.from(t.body.childNodes).some(function(e){return 1===e.nodeType})}Object.defineProperty(t,"__esModule",{value:!0}),t.isHTMLString=o;var r=t.HTML_MIME="text/html";t.XML_MIME="application/xml",t.CSS_MIME="text/css",t.JS_MIME="application/js"},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.Outlet=function(){function e(t,n){o(this,e),this.element=t,this.name=n}return r(e,[{key:"hasContent",value:function(){return 0!==this.element.children.length}},{key:"clearOutlet",value:function(){for(;this.element.children.length>0;)this.element.removeChild(this.element.children[0])}},{key:"addContentString",value:function(e){this.element.innerHTML=e}},{key:"addContent",value:function(e){this.element.appendChild(e)}}]),e}()}])});
//# sourceMappingURL=simple-router.js.map